{% macro show_comments(parent_id,count) %}
	{% set clist = get_comments(post.id,parent_id) %}
	{% set countr = count + 1 %}
	{% set prefix = '-'*countr %}
	{% set prefix2 = "&nbsp;"*countr %}
	{% if clist is defined %}
		{% for c in clist %}
			{{ prefix2|safe }} Author: {{ get_author(c.user_id) }} <br/>
			{{ prefix }}
			{{ c.message }}
			<br/>
			{{ prefix2|safe }}<a href="{{ url_for('write_comment', sid=sub.id, pid=post.id, cid=c.id) }}"> comment </a>
			&nbsp &nbsp <a href="{{ url_for('delete_comment', sid=sub.id, pid=post.id, cid=c.id) }}"> delete </a>
			<br/><br/>
			{{ show_comments(c.id,countr) }}
		{% endfor %}
	{% endif %}
{% endmacro %}{% extends "header.html" %}

{% block title %}
{{ post.title }}
{% endblock %}

{% block body %}
	<br/><br/>
	<h2> {{ post.title }} </h2>
	<br/>
	Author: {{ get_author(post.user_id) }} <br/>
	{{ post.message }} 
	<br/><br/><br/>
	{{ show_comments(0,0) }}
	<br/>
	<a href="{{ url_for('write_comment',sid=sub.id, pid=post.id, cid=0)}}">Comment </a>
	<br/><br/>
	<a href="{{ url_for('show_sub',sid=sub.id) }}"> Back </a>

{% endblock %}
